<node>
	<!--
		org.ofono.SimToolkitAgent:

		Object path: freely definable
	-->
	<interface name="org.ofono.SimToolkitAgent">

		<!--
			RequestSelection:

			Tells the agent to ask the user to select an item
			from the menu.  The default is set the the default
			item index or -1 if no default is provided.

			This function should return the index of the item or
			an error given below.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession

			Implementation notes:

			- Data / Navigation type not indicated
			- Soft key preferred not indicated
			- Help available ignored
		-->
		<method name="RequestSelection">
			<arg name="title" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="items" direction="in" type="a(sy)" />
			<arg name="default" direction="in" type="n" />
			<arg name="selection" direction="out" type="y" />
		</method>

		<!--
			DisplayText:

			Tells the agent to display text from the SIM.  The
			boolean urgent parameter tells the agent whether this
			is an urgent message and all other messages should be
			cleared prior to the display of this text.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
					 #org.ofono.Error.SimToolkit.Busy

			Implementation notes:

			- High / normal priority indicated by urgent

			- The clear message after delay / wait for user to
			  clear flags are handled as follows.  If the wait for
			  user flag is set, then oFono sets a higher timeout
			  for the Agent DisplayText method call.  It will then
			  call Cancel() on the agent after this timeout
			  expires and the "No response from user" terminal
			  response is sent.  If the agent returns earlier from
			  this method call, a terminal response "Command
			  "performed successfully" is sent.

			  It might be required to pass a flag to the UI to
			  hint it that allocation of an 'acknowledgement'
			  button is required in the case of a longer timeout.
			  However, the UI can figure this out itself as well
			  based on a timer threshold.  More input needed.

			- Immediate Response indication is handled internally,
			  terminal response is sent immediately and no other
			  indication is given to the user / agent.  Response
			  from this method call is ignored and a short
			  timeout is used for the method call.  Once another
			  proactive command arrives, and the DisplayText is
			  still pending, Cancel() is called.
		-->
		<method name="DisplayText">
			<arg name="text" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="urgent" direction="in" type="b" />
		</method>

		<!--
			RequestInput:

			Tells the agent to request an input string from the
			user.  The alpha parameter and icon_id gives context
			to the user.  The default string contains the suggested
			default by the SIM.  The min and max parameters contain
			how many characters the user should enter.  The
			parameter hide_typing indicates whether user's typing
			should be opaque.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession

			Implementation notes:

			- It is still unclear how to handle gsm vs ucs2
			  accepted alphabet selection.  Can the reduced
			  character set functionality from SMS be applied
			  here?  If not, then an extra gsm vs ucs2 acceptance
			  argument needs to be added.
		-->
		<method name="RequestInput">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="default" direction="in" type="s" />
			<arg name="min" direction="in" type="y" />
			<arg name="max" direction="in" type="y" />
			<arg name="hide_typing" direction="in" type="b" />
			<arg name="input" direction="out" type="s" />
		</method>

		<!--
			RequestDigits:

			Same as GetInput but only digit characters (0-9, *#+)
			are expected.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="RequestDigits">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="default" direction="in" type="s" />
			<arg name="min" direction="in" type="y" />
			<arg name="max" direction="in" type="y" />
			<arg name="hide_typing" direction="in" type="b" />
			<arg name="digits" direction="out" type="s" />
		</method>

		<!--
			RequestKey:

			Tells the agent to request a single input key from
			the user.  The alpha parameter contains the context
			for the request.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="RequestKey">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="key" direction="out" type="s" />
		</method>

		<!--
			RequestDigit:

			Same as above, but only digits (0-9, *#+) are
			expected.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="RequestDigit">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="digit" direction="out" type="s" />
		</method>

		<!--
			RequestQuickDigit:

			Same as above but the entered digit shall not be
			displayed and the response shall be sent immediately
			after the key press. "+" is not allowed for user input.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="RequestQuickDigit">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="quick_digit" direction="out" type="s" />
		</method>

		<!--
			RequestConfirmation:

			Asks the agent to get confirmation from the user.

			Possible Errors: #org.ofono.Error.SimToolkit.GoBack
					 #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="RequestConfirmation">
			<arg name="alpha" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="confirm" direction="out" type="b" />
		</method>

		<!--
			ConfirmCallSetup:

			Asks the agent to request user to confirm an
			outgoing call setup.  If confirmed, the next new
			outgoing call reported by VoiceCallManager will
			have the Information and Icon properties set to
			inform the user.  Hanging up before the call is
			connected will cause EndSession reply to be sent.

			Possible Errors: #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="ConfirmCallSetup">
			<arg name="information" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="confirm" direction="out" type="b" />
		</method>

		<!--
			PlayTone:

			Tells the agent to play an audio tone once.  The
			method should return once the tone is finished
			playing.  The text parameter contains an optional
			text to be displayed to the user.  The following
			tones are defined:
				"dial-tone"
				"busy"
				"congestion"
				"radio-path-acknowledge"
				"radio-path-not-available"
				"error"
				"call-waiting"
				"ringing-tone"
				"general-beep"
				"positive-acknowledgement"
				"negative-acknowledgement"
				"user-ringing-tone"
				"user-sms-alert"
				"critical" (high priority)
				"vibrate"
				"happy"
				"sad"
				"urgent-action"
				"question"
				"message-received"

			Possible Errors: #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="PlayTone">
			<arg name="tone" direction="in" type="s" />
			<arg name="text" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
		</method>

		<!--
			LoopTone:

			Tells the agent to reproduce an audio tone in a
			loop until the method call is cancelled.  See
			PlayTone() above for the list of possible tone names.
			The text parameter contains an optional text to
			be displayed to the user.

			Possible Errors: #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="LoopTone">
			<arg name="tone" direction="in" type="s" />
			<arg name="text" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
		</method>

		<!--
			DisplayActionInformation:

			Supplies a text string and/or icon concerning the
			current activity in the terminal and UICC.  The
			text should be displayed to the user on screen
			until the call is canceled using Cancel().  If the
			method returns it is assumed that the user has
			explicitly dismissed the dialog and no Cancel() is
			sent.
		-->
		<method name="DisplayActionInformation">
			<arg name="text" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
		</method>

		<!--
			ConfirmLaunchBrowser:

			Asks the agent to request user to confirm launch
			browser. If confirmed, then the agent should send
			confirmation message to oFono and then should open
			the launch browser with the given url.
		-->
		<method name="ConfirmLaunchBrowser">
			<arg name="information" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="url" direction="in" type="s" />
			<arg name="confirm" direction="out" type="b" />
		</method>

		<!--
			DisplayAction:

			Supplies a text string and/or icon concerning the
			current activity in the terminal and UICC. The
			text should be displayed to the user on screen
			until the call is canceled using Cancel() or until the
			user decides to end the session.

			Possible Errors: #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="DisplayAction">
			<arg name="text" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
		</method>

		<!--
			ConfirmOpenChannel:

			Asks the agent to request user to confirm the channel
			set-up.

			Possible Errors: #org.ofono.Error.SimToolkit.EndSession
		-->
		<method name="ConfirmOpenChannel">
			<arg name="information" direction="in" type="s" />
			<arg name="icon_id" direction="in" type="y" />
			<arg name="confirm" direction="out" type="b" />
		</method>

		<!--
			Cancel:

			Asks the agent to cancel any ongoing operation in
			progress.  This is usually either because the agent
			is taking too long to respond, the Sim Application
			has terminated the session or a task has finished.
		-->
		<method name="Cancel">
			<annotation name="org.freedesktop.DBus.Method.NoReply" value="true" />
		</method>

		<!--
			Release:

			Agent is being released, possibly because of oFono
			terminating, SimToolkit interface torn down or modem
			off.  If the agent is registered as a global agent,
			no UnregisterAgent call is expected.
		-->
		<method name="Release">
			<annotation name="org.freedesktop.DBus.Method.NoReply" value="true" />
		</method>

	</interface>
</node>
